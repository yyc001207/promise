<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <button id="btn">点击抽奖</button>
    </div>
    <script>
        /* 
        一个简单的抽奖演示程序
        中奖概率为30%
        */
        //随机数生成
        function rand(m, n) {
            return Math.ceil(Math.random() * (n - m + 1) + m - 1)
        }
        const btn = document.getElementById('btn')
        btn.addEventListener('click', function () {
            //定时器
            // setTimeout(() => {
            //     let n = rand(1, 100)
            //     if (n <= 30) {
            //         alert('中奖')
            //     } else {
            //         alert('再接再厉')
            //     }
            // }, 1000)

            //Promise实现
            /* 
            形参：函数类型数据
                resolve：解决  
                reject：拒绝
            */
            const p = new Promise((resolve, reject) => {
                setTimeout(() => {
                    let n = rand(1, 100)
                    if (n <= 30) {
                        resolve(n)//将promise状态设置为成功
                    } else {
                        reject(n)//将promise状态设置为失败
                    }
                }, 1000)
            })
            //then方法，第一个形参是成功的回调，第二个是失败的回调
            p.then((value) => {
                alert('恭喜中奖，中奖数字为：' + value)
            }, (reason) => {
                alert('再接再厉，您的号码为：' + reason)
            })
        })
    </script>
</body>

</html>''